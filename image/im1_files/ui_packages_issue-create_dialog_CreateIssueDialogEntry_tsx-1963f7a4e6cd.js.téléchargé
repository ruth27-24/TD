"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx"],{9379:(e,l,a)=>{a.d(l,{or:()=>ea,vN:()=>en});var n=a(74848),s=a(43221),t=a(47584),i=a(96540),r=a(18312),o=a(8776),u=a(41686),d=a(5796),c=a(16255),m=a(15033),p=a(91246),y=a(1918),g=a(55930),k=a(26677),F=a(75177),f=a(29653),h=a(38621),I=a(55847),x=a(52464),T=a(52625),b=a(14150),K=a(90628);function S({repository:e,template:l}){let{setDisplayMode:a}=(0,b.a)(),s=l?l.name:T.k.blankIssueName,t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{t.current?.focus()},[]),(0,n.jsx)("div",{children:(0,n.jsxs)(I.Q,{onClick:()=>a(K.q.TemplatePicker),leadingVisual:h.RepoIcon,trailingVisual:h.PencilIcon,ref:t,children:[e&&(0,n.jsxs)("span",{children:[s," ",(0,n.jsx)(x.A,{sx:{fontWeight:"light"},children:"in"})," ",e.owner.login,"/",e.name]}),!e&&(0,n.jsx)(n.Fragment,{children:"Select a repository"})]})})}try{S.displayName||(S.displayName="TemplatePickerButton")}catch{}let j=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],l=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"isSecurityPolicyEnabled",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"securityPolicyUrl",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isBlankIssuesEnabled",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"templateTreeUrl",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},m={kind:"Literal",name:"first",value:20},p=[m,{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f=[y,g,o,{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},k,F],h={alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},I={alias:null,args:p,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:f,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null},h],storageKey:'labels(first:20,orderBy:{"direction":"ASC","field":"NAME"})'},x=[{kind:"Literal",name:"first",value:10}],T=[y,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},o,{alias:null,args:[{kind:"Literal",name:"size",value:64}],kind:"ScalarField",name:"avatarUrl",storageKey:"avatarUrl(size:64)"}],b={alias:null,args:x,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"UserEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"AssigneePickerAssignee",selections:T,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null},h],storageKey:"assignees(first:10)"},K=[y,o,{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},k,g],S={alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"type",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"IssueTypePickerIssueType",selections:K,args:null,argumentDefinitions:[]}],storageKey:null},j={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},C=[m],P=[y,c,{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"viewerCanUpdate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasReachedItemsLimit",storageKey:null},i],L={alias:null,args:null,concreteType:"RepositoryContactLink",kind:"LinkedField",name:"contactLinks",plural:!0,selections:[o,r,F,i,j],storageKey:null},v={alias:null,args:p,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:f,storageKey:null}],storageKey:null},h],storageKey:'labels(first:20,orderBy:{"direction":"ASC","field":"NAME"})'},R={alias:null,args:x,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"UserEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:T,storageKey:null}],storageKey:null},h],storageKey:"assignees(first:10)"},N={alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"type",plural:!1,selections:K,storageKey:null},E={alias:"itemId",args:null,kind:"ScalarField",name:"id",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"descriptionHTML",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"required",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RepositoryAndTemplatePickerDialogQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"InlineDataFragmentSpread",name:"RepositoryPickerRepositoryIssueTemplates",selections:[a,n,s,t,{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[i,r,o,u,d,c,I,b,S,j],storageKey:null},{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[i,o,k,u,c,{kind:"InlineDataFragmentSpread",name:"IssueFormElements_templateElements",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"elements",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"TextInputElement_input"}],type:"IssueFormElementInput",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"TextAreaElement_input"}],type:"IssueFormElementTextarea",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MarkdownElement_input"}],type:"IssueFormElementMarkdown",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"DropdownElement_input"}],type:"IssueFormElementDropdown",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CheckboxesElement_input"}],type:"IssueFormElementCheckboxes",abstractKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},I,b,{alias:null,args:C,concreteType:"ProjectV2Connection",kind:"LinkedField",name:"projects",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"ProjectPickerProject",selections:P,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:"projects(first:20)"},S,j],storageKey:null},L],args:null,argumentDefinitions:[]}],type:"Repository",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RepositoryAndTemplatePickerDialogQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,{kind:"InlineFragment",selections:[a,n,s,t,{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[i,r,o,u,d,c,v,R,N,j],storageKey:null},{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[i,o,k,u,c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"elements",plural:!0,selections:[i,{kind:"InlineFragment",selections:[E,D,w,A,_,Q,j],type:"IssueFormElementInput",abstractKey:null},{kind:"InlineFragment",selections:[E,D,w,A,_,Q,{alias:null,args:null,kind:"ScalarField",name:"render",storageKey:null},j],type:"IssueFormElementTextarea",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"contentHTML",storageKey:null}],type:"IssueFormElementMarkdown",abstractKey:null},{kind:"InlineFragment",selections:[D,w,{alias:null,args:null,kind:"ScalarField",name:"options",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"multiple",storageKey:null},{alias:"defaultOptionIndex",args:null,kind:"ScalarField",name:"default",storageKey:null},j],type:"IssueFormElementDropdown",abstractKey:null},{kind:"InlineFragment",selections:[D,w,{alias:"checkboxOptions",args:null,concreteType:"IssueFormElementCheckboxOption",kind:"LinkedField",name:"options",plural:!0,selections:[D,{alias:null,args:null,kind:"ScalarField",name:"labelHTML",storageKey:null},Q],storageKey:null},j],type:"IssueFormElementCheckboxes",abstractKey:null}],storageKey:null},v,R,{alias:null,args:C,concreteType:"ProjectV2Connection",kind:"LinkedField",name:"projects",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"node",plural:!1,selections:P,storageKey:null}],storageKey:null}],storageKey:"projects(first:20)"},N,j],storageKey:null},L],type:"Repository",abstractKey:null},y],storageKey:null}]},params:{id:"5183486b7f55b10e9cd861a5cb48a36e",metadata:{},name:"RepositoryAndTemplatePickerDialogQuery",operationKind:"query",text:null}}}();j.hash="8764e7c3d25d1daf2114c7d35030b5e6";var C=a(7120),P=a(49813),L=a(34614),v=a(10037),R=a(20053);let N=({repository:e,templates:l})=>{let{optionConfig:a}=(0,b.a)(),s=e.viewerIssueCreationPermissions.typeable&&e.viewerIssueCreationPermissions.triageable;if(!(0,v.ZQ)(l))return null;let t=e.viewerCanPush?T.k.editTemplates:T.k.viewTemplates;return(0,n.jsxs)("div",{className:(0,R.$)({[P.A.fullscreen]:!a.insidePortal}),children:[s&&(0,n.jsx)("span",{children:"You can now add issue types to your forms and templates! "}),(0,n.jsx)(L.A,{href:l.templateTreeUrl,className:P.A.link,children:t})]})};try{N.displayName||(N.displayName="TemplateListPaneFooter")}catch{}var E=a(4576),D=a(2622);function w({templates:e,...l}){return e?(0,n.jsx)(Q,{templates:e,...l}):(0,n.jsx)(A,{...l})}function A({repository:e,...l}){let[a,s]=(0,r.useQueryLoader)(j);return((0,i.useEffect)(()=>{e&&s({id:e.id})},[s,e]),a)?(0,n.jsx)(_,{repository:e,queryRef:a,...l}):(0,n.jsx)(C.XT,{})}function _({queryRef:e,...l}){let a=(0,r.usePreloadedQuery)(V,e),{setTemplates:t}=(0,E.u)(),o=void 0!==a.node?(0,r.readInlineData)(s.DM,a.node):null;return((0,i.useEffect)(()=>{t(o??void 0)},[t,o]),o)?(0,n.jsx)(Q,{templates:o,...l}):(0,n.jsx)(C.JE,{id:l.descriptionId})}function Q({repository:e,templates:l,descriptionId:a,...s}){let{optionConfig:t}=(0,b.a)(),{insidePortal:i}=t;return(0,n.jsxs)("div",{children:[!e.hasIssuesEnabled&&(0,n.jsxs)("div",{className:`${D.A.disabledStateGap} d-flex flex-row flex-items-center m-3`,children:[(0,n.jsx)(h.InfoIcon,{}),(0,n.jsx)("span",{id:a,children:T.k.issuesDisabledForRepo})]}),e.hasIssuesEnabled&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.JH,{templates:l,...s,className:`${i?"":`border borderColor-muted rounded-2 overflow-hidden
                  ${t.showRepositoryPicker?"pt-0 mt-0":"py-2 mt-2"}`}`}),!i&&(0,n.jsx)(N,{repository:e,templates:l})]})]})}try{w.displayName||(w.displayName="TemplateListPane")}catch{}try{A.displayName||(A.displayName="TemplateListPaneFromRepo")}catch{}try{_.displayName||(_.displayName="TemplateListPaneFromQuery")}catch{}try{Q.displayName||(Q.displayName="TemplateListInternal")}catch{}let V=j;function M({repository:e,setRepository:l,topReposQueryRef:a,organization:t,onTemplateSelected:r}){let{optionConfig:o}=(0,b.a)(),u=(0,i.useId)(),d=o.insidePortal?"ml-3":"ml-0";return(0,n.jsxs)("div",{className:o.insidePortal?"pt-2":"",children:[(0,n.jsx)(U,{className:d,name:"Repository"}),(0,n.jsx)("div",{className:`${o.insidePortal?"mb-2":"mb-3"} ${d}`,children:(0,n.jsx)(s.f0,{"aria-describedby":u,initialRepository:e,onSelect:l,organization:t,topReposQueryRef:a,focusRepositoryPicker:!0,enforceAtleastOneSelected:!0,options:{hasIssuesEnabled:!0}})}),(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(C.XT,{}),children:e&&(0,n.jsx)(w,{repository:e,onTemplateSelected:r,descriptionId:u})})]})}function U({name:e,className:l}){return(0,n.jsxs)("div",{className:`pt-1 pb-1 ${l}`,children:[(0,n.jsx)("span",{className:"text-bold",children:e}),(0,n.jsx)("span",{className:"ml-1 mb-1 fgColor-danger",children:"*"})]})}try{M.displayName||(M.displayName="RepositoryAndTemplatePickerDialog")}catch{}try{U.displayName||(U.displayName="Field")}catch{}var q=a(22418),$=a(55724),B=a(9935),O=a(35312),G=a(97348),H=a(69145);let Z=({topReposQueryRef:e,createIssueUrlParamsRef:l,navigate:a,...s})=>{let{issueTitle:u,issueRepoId:d,issueTemplateId:c,issueBody:m}=o.tT.localStorageKeys,{repository:p,setRepository:h,template:I,setTemplate:x,preselectedRepository:T,preselectedTemplate:j,templates:P,labels:L,setLabels:R,assignees:N,setAssignees:D,projects:A,setProjects:_,milestone:Q,setMilestone:V,issueType:U,setIssueType:Z}=(0,E.u)(),{optionConfig:z,displayMode:W,initialDefaultDisplayMode:J,setDisplayMode:X,setCreateMoreCreatedPath:Y}=(0,b.a)(),{storageKeyPrefix:ee}=z,[el,ea]=(0,k.F)(d(ee),void 0),[en,es]=(0,k.F)(c(ee),void 0),[et,ei]=(0,k.F)(u(ee),""),[er,eo]=(0,k.F)(m(ee),""),[eu,ed]=(0,i.useState)(null),[ec,em]=(0,i.useState)(null),[ep,ey]=(0,i.useState)(et),[eg,ek]=(0,i.useState)(er),[eF,ef]=(0,i.useState)(!1),[eh,eI]=(0,i.useState)(null),ex=(0,i.useCallback)(e=>{ei(e),ey(e)},[ei,ey]),eT=(0,i.useCallback)(e=>{eo(e),ek(e)},[eo,ek]),eb=(0,i.useCallback)(()=>{ex(ep),eT(eg)},[ex,ep,eT,eg]);(0,i.useEffect)(()=>{T&&(eC(T),(0,O.Ll)(t.fV.pathname)&&z.issueCreateArguments?.initialValues?.milestone?eI(z.issueCreateArguments?.initialValues?.milestone):j&&eP(j,z.issueCreateArguments?.initialValues,!0))},[]);let eK=(0,i.useCallback)(()=>{D([]),R([]),_([]),V(null)},[D,R,V,_]),eS=(0,i.useCallback)(()=>{em(et),ed(er),(0,k.D)((0,o.wK)(ee))},[er,ee,et]),ej=(0,i.useCallback)(()=>(0,O.r4)({repository:p,template:I,preselectedRepository:T,title:et,body:er,assignees:N,labels:L,milestone:Q??void 0,type:U??void 0,projects:A,displayMode:W}),[p,I,T,et,er,N,L,Q,U,A,W]);(0,i.useEffect)(()=>{null===new URLSearchParams(t.fV?.search).get(G.t.queryParams.template)&&P&&eF&&!z.insidePortal&&(0,v.ZQ)(P)&&W===K.q.IssueCreation&&X(K.q.TemplatePicker)},[t.fV?.search]),(0,i.useImperativeHandle)(l,()=>({generateUrlParams:()=>ej()}),[ej]);let eC=(0,i.useCallback)(e=>{e&&(el!==e.id&&eK(),h(e),ea(e.id),Y({owner:e.owner.login,repo:e.name,number:void 0}))},[eK,el,Y,h,ea]),eP=(0,i.useCallback)((e,l,n=!1)=>{if((0,v.VA)(e.data))return;let s=en===v.$K,t=en!==e.data?.__id;if(x(e),es(e.data?.__id),n||ef(!0),t){n||(0,O.BD)({insidePortal:z.insidePortal,template:e,repository:p,preselectedRepository:T}),eK(),ex([e.data.title??"",(s&&et&&et.length>0?` ${et}`:"")||l?.title&&` ${l?.title}`||""].join("").trimStart());let a="";((0,v.Al)(e.data)||(0,v.yJ)(e.data))&&(a=l?.body??(s&&er?.length!==0?`${er}

---
`:"")+e.data.body),eT(a),R(l?.labels??(e.data.labels?.edges?.flatMap(e=>e?.node?[r.readInlineData(g.l_,e?.node)]:[])||[])),D(l?.assignees??((e.data.assignees?.edges||[]).flatMap(e=>e?.node?[(0,r.readInlineData)(y.G1,e?.node)]:[])||[])),l?.projects?_(l.projects):(0,v.GQ)(e.data)&&_(e.data.projects?.edges?.flatMap(e=>e?.node?[r.readInlineData($.dW,e?.node)]:[])||[]),(l?.milestone||eh)&&(V(l?.milestone||eh),eI(null));let t=l?.type??null;!t&&((0,v.GQ)(e.data)||(0,v.Al)(e.data))&&void 0!==e.data.type&&(t=(0,r.readInlineData)(B.sH,e.data.type)??null),Z(t??null)}z.navigateToFullScreenOnTemplateChoice?a((0,O.mm)({template:e,repository:p,preselectedRepository:T})):X(K.q.IssueCreation)},[en,x,es,z.navigateToFullScreenOnTemplateChoice,z.insidePortal,eK,et,ex,eT,R,D,eh,Z,p,T,er,_,V,a,X]),eL=J===K.q.IssueCreation&&e;return(0,n.jsxs)(F.A,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",gap:2},tabIndex:-1,children:[W===K.q.IssueCreation&&(0,n.jsxs)(n.Fragment,{children:[eL&&(0,n.jsx)(F.A,{sx:{width:"content"},"data-testid":H.Y.templatePickerButton,children:(0,n.jsx)(S,{repository:p,template:I})}),p&&(0,n.jsx)(f.e,{...s,selectedTemplate:I,repository:p,title:ec||et,setTitle:ei,body:eu||er,setBody:eo,resetTitleAndBody:eb,clearOnCreate:eS,focusTitleInput:!eL,footer:z.insidePortal?void 0:(0,n.jsx)(q.l,{onClose:s.onCancel})})]}),z.showRepositoryPicker&&W===K.q.TemplatePicker&&e&&(0,n.jsx)(M,{repository:p,setRepository:eC,topReposQueryRef:e,organization:z.scopedOrganization,onTemplateSelected:eP}),!z.showRepositoryPicker&&W===K.q.TemplatePicker&&p&&(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(C.XT,{}),children:p&&(0,n.jsx)("div",{"data-hpc":!0,children:(0,n.jsx)(w,{repository:p,templates:P,onTemplateSelected:eP})})})]})};try{Z.displayName||(Z.displayName="CreateIssue")}catch{}var z=a(70814);let W=({onClose:e,...l})=>{let{displayMode:a}=(0,b.a)(),{repository:s,templates:t}=(0,E.u)(),i=a===K.q.TemplatePicker&&s&&t,r=!i&&a===K.q.IssueCreation;return(i||r)&&(!i||(0,v.ZQ)(t))?i?(0,n.jsx)(p.l.Footer,{sx:{justifyContent:"flex-start"},children:(0,n.jsx)(N,{repository:s,templates:t})}):(0,n.jsx)(p.l.Footer,{children:(0,n.jsx)(q.l,{onClose:e,...l})}):null};try{W.displayName||(W.displayName="CreateIssueDialogFooter")}catch{}var J=a(75632),X=a(82939);let Y=({onCreateSuccess:e,onCancel:l,navigate:a,...s})=>{let{optionConfig:t,initialDefaultDisplayMode:r,setDisplayMode:o,displayMode:u}=(0,b.a)(),{usedStorageKeyPrefix:d}=(0,E.u)(),{onSafeClose:y}=(0,X.Z)({storageKeyPrefix:d,issueFormRef:s.issueFormRef,onCancel:l}),g=(0,i.useCallback)(()=>{l(),o(r)},[r,l,o]),k=(0,i.useCallback)(({issue:l,createMore:a})=>{e({issue:l,createMore:a}),a||o(r)},[r,e,o]),F={...s,onCancel:g},f=(0,i.useRef)(null),h=(0,J.G7)("issues_react_new_select_panel");return(0,n.jsx)(c.Z,{children:(0,n.jsx)(m.g,{flags:{primer_react_select_panel_with_modern_action_list:h},children:(0,n.jsx)(p.l,{renderHeader:e=>(0,n.jsx)(z.h,{createIssueUrlParamsRef:f,navigate:a,...e}),renderFooter:()=>(0,n.jsx)(W,{onClose:()=>y()}),renderBody:()=>(0,n.jsx)("div",{className:`${u===K.q.IssueCreation?"p-3":"p-0"}`,children:(0,n.jsx)(Z,{onCreateSuccess:k,createIssueUrlParamsRef:f,navigate:a,...F})}),onClose:y,returnFocusRef:t.returnFocusRef,width:"xlarge",height:"auto",sx:{width:"100%",margin:4,maxWidth:"800px",maxHeight:"clamp(300px, 80vh, 800px)"}})})})};try{Y.displayName||(Y.displayName="CreateIssueDialog")}catch{}var ee=a(64704),el=a(9287);let ea=({...e})=>{let l=(0,J.G7)("issues_react_use_new_create_issue");return(0,n.jsx)(i.Suspense,{children:l?(0,n.jsx)(el.pU,{...e}):(0,n.jsx)(en,{...e})})},en=({navigate:e,isCreateDialogOpen:l,setIsCreateDialogOpen:a,onCancel:t,onCreateSuccess:c,onCreateError:m,optionConfig:p,canBypassTemplateSelection:y,setIsNavigatingToNew:g})=>{let[k,F,f]=(0,r.useQueryLoader)(s.m),[h,I,x]=(0,r.useQueryLoader)(s.SR),T=(0,u.S)(p),b=T.showRepositoryPicker;(0,i.useEffect)(()=>{if(b)return F({topRepositoriesFirst:o.tT.repositoriesPreloadCount,hasIssuesEnabled:!0,owner:null},{fetchPolicy:"store-or-network"}),()=>{f()}},[f,F,b]);let K=(0,i.useMemo)(()=>T.scopedRepository?{owner:T.scopedRepository.owner,name:T.scopedRepository.name}:T.issueCreateArguments?.repository?{owner:T.issueCreateArguments.repository.owner,name:T.issueCreateArguments.repository.name}:null,[T.issueCreateArguments?.repository,T.scopedRepository]);(0,i.useEffect)(()=>(K&&I({...K,includeTemplates:!0},{fetchPolicy:"store-or-network"}),()=>x()),[x,K,I]);let S=()=>{t?.(),a(!1)};return l&&(!b||k)&&(h||!K)?(0,n.jsx)(es,{createIssueProps:{topReposQueryRef:k??void 0,onCreateSuccess:({issue:l,createMore:a})=>{c?c({issue:l,createMore:a}):a||(S(),e((0,d.dRG)({owner:l.repository.owner.login,repo:l.repository.name,issueNumber:l.number})))},onCreateError:e=>m?.(e),onCancel:S,navigate:e},config:T,currentRepoQueryRef:h??null,renderWithoutDialog:!1,canBypassTemplateSelection:y,setIsNavigatingToNew:g}):null},es=({currentRepoQueryRef:e,...l})=>e?(0,n.jsx)(et,{currentRepoQueryRef:e,...l}):(0,n.jsx)(ei,{currentRepoData:null,...l}),et=({currentRepoQueryRef:e,...l})=>{let a=(0,r.usePreloadedQuery)(s.SR,e);return(0,n.jsx)(ei,{currentRepoData:a,...l})},ei=({createIssueProps:e,config:l,currentRepoData:a,renderWithoutDialog:o,canBypassTemplateSelection:u,setIsNavigatingToNew:d})=>{let c=a&&void 0!==a.repository?(0,r.readInlineData)(s.DM,a.repository):null,m=a&&void 0!==a.repository?(0,r.readInlineData)(s.R6,a.repository):null,p=(0,v.ZQ)(c??null),y=m?.hasIssuesEnabled??!1,g=(0,v.$8)({templates:c??null,issueCreateArguments:l.issueCreateArguments}),k={repository:m??void 0,template:g,templates:c??void 0,parentIssue:l.issueCreateArguments?.parentIssue},F=(0,i.useMemo)(()=>(0,K.F)({hasSelectedTemplate:void 0!==g,hasAvailableTemplates:p,repositoryHasIssuesEnabled:y,onChoosePage:o&&(0,O.Ll)(t.fV.pathname),onNewPage:o&&(0,O.MG)(t.fV.pathname)}),[p,g,o,y]),f=(0,i.useRef)(null);if(u&&c&&l.scopedRepository){let a=function(e,l){if(e.contactLinks&&e.contactLinks.length>0||e.isSecurityPolicyEnabled&&e.securityPolicyUrl||e.isBlankIssuesEnabled)return null;let a=null;if(e.issueForms){if(1===e.issueForms.length)a=e.issueForms[0].filename;else if(e.issueForms.length>1)return null}if(e.issueTemplates){if(a){if(e.issueTemplates.length>0)return null}else 1===e.issueTemplates.length&&(a=e.issueTemplates[0].filename)}if(!a)return null;let n=t.fV?.origin??"",s=`${l.owner}/${l.name}`,i=`${n}/${s}`;return(0,O.RG)({repositoryAbsolutePath:i,fileName:a})}(c,l.scopedRepository);if(a)return d?.(!0),e.navigate(a),null}let h={...e,issueFormRef:f};return F===K.q.IssueCreation&&l.navigateToFullScreenOnTemplateChoice?(e.navigate((0,O.mm)({template:g??(0,v.AI)(),repository:m??void 0,preselectedRepository:m??void 0})),null):(0,n.jsxs)(ee.S,{optionConfig:l,overrideFallbackDisplaymode:F,preselectedData:k,children:[!0===o&&(0,n.jsx)(Z,{...h}),!0!==o&&(0,n.jsx)(Y,{...h})]})};try{ea.displayName||(ea.displayName="CreateIssueDialogEntry")}catch{}try{en.displayName||(en.displayName="CreateIssueDialogEntryInternal")}catch{}try{es.displayName||(es.displayName="CreateIssueEntry")}catch{}try{et.displayName||(et.displayName="CreateIssueEntryWithRepo")}catch{}try{ei.displayName||(ei.displayName="CreateIssueEntryInternal")}catch{}}}]);
//# sourceMappingURL=ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx-502d014e49a3.js.map